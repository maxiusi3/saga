## 概述
- 在现有 Next.js + Supabase 架构中扩展“故事续写”和“图片上传/选入”能力，保持录制流程一致与多语言文案适配。
- 以最小侵入为原则：沿用 `stories` 数据模型，新增关联和图片字段；复用 `StorageService.uploadImage` 做图片存储；扩展交互（评论/追问）API 以支持图片附件。

## 数据模型与存储
- `stories`：新增 `parent_story_id`（可空）用于标记续写故事，形成“原始故事 + 续写子故事”的播放列表。
- `stories`：新增 `images`（JSON[]）用于存放故事（或子故事段）的图片，元素含 `{url, source, source_id, caption?}`。
- `interactions`：新增 `attachments`（JSON[]）或 `image_urls`（JSON[]）用于评论/追问的图片；元素结构与上保持一致。
- 存储桶：继续使用 Supabase Storage；音频在 `audio-recordings`，图片在默认 `saga` 或新增 `images` 目录层级（`images/stories/<storyId>/...`、`images/interactions/<interactionId>/...`）。

## 后端 API 扩展
- 故事创建：扩展 `POST /api/projects/[id]/stories` 支持 `parent_story_id` 与 `images`（可选）。
- 交互写入：扩展 `POST /api/stories/[storyId]/interactions` 接受图片附件（多图），返回带附件的交互记录。
- 选图入故事：新增 `POST /api/stories/[storyId]/images/select-from-interactions`（或复用 `PATCH /api/stories/[storyId]`），把选中的评论图片追加到 `stories.images`，记录来源。

## 前端流程与页面
- 录制续写：
  - 在故事详情页增加“录制后续故事”入口（显式标注父故事标题），跳转到现有录制页并携带 `parent_story_id`；录制/上传/转写流程与新故事一致。
  - 录制页支持图片上传（可在录制完成后的编辑区或实时添加），与故事内容一并提交。
- 故事详情：
  - 顶部显示原始故事信息，下方渲染“播放列表”——包含原始故事与所有 `parent_story_id=当前故事` 的子故事，支持顺序播放与独立查看文本/图片。
  - 新增“评论补充图片”区块：展示评论中的图片，讲述者可勾选后“选入故事”。
- 评论与追问：
  - `StoryInteractions` 增加图片上传控件（多图），支持预览与删除；评论发布后图片随交互记录展示。

## 组件与服务改动
- 复用 `StorageService.uploadImage(file, folder)` 做图片上传；限制类型（jpg/png/webp）、大小（例如 10MB），返回 URL。
- `StoryService`：
  - 新增创建续写故事 `createStory({ parent_story_id, ... })`。
  - `updateStory` 支持 `images` 的追加/移除。
- 播放器与详情：
  - 播放器支持“多段音频”列表；每段展示对应文本与图片。

## i18n 文案
- 在 `public/locales/<locale>/stories.json` 与 `interactions.json` 增加：
  - 续写入口、播放列表、图片上传提示、选图入故事、来源标签（“段落图片”“评论补充”）。
- 页面与组件通过 `useTranslations('stories')`/`useTranslations('interactions')` 引用；继续沿用 `app/[locale]/...` 语言前缀路由。

## 权限与合规
- 续写故事：限制为 storyteller（或项目成员中的讲述者角色）。
- 评论图片上传：允许 storyteller 与 facilitator；owner 保持不可发表（沿用现有策略）。
- 图片访问：可考虑私有存储 + 签名 URL；如继续公有 URL，明确只存非敏感图片并控制时效与大小。

## 验证与回归
- 单元与集成：
  - API：创建续写、评论图片上传、选图入故事三条主流程的成功/失败用例。
  - 前端：录制与提交、播放列表渲染、图片选择与追加的交互测试。
- 回归：现有故事创建与播放流程保持不变；AI 转写与生成内容不受影响。

## 待确认问题
1) 续写实现偏好：使用“子故事”（`parent_story_id`）形成播放列表，是否满足你对“多个片段”的预期，还是希望单独的 `story_segments` 表更细粒度管理（含排序/合并）？
2) 图片上限与规格：是否限制每段/每评论的图片数量、最大体积与分辨率？是否需要自动压缩或生成缩略图？
3) 图片存储策略：是否要求私有访问并统一使用签名 URL？
4) 评论图片入故事：入库后是否可编辑说明文字（`caption`）与排序？
5) 播放列表排序：按创建时间还是允许手动排序？
6) 多语言覆盖范围：除新增文案外，是否需要我补齐现有页面的翻译缺失、以及目标语言清单？

请确认上述方案与问题，我即可开始实现。