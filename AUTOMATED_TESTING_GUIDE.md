# Saga æµè§ˆå™¨è‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡å—

## ğŸ¤– MCPé…ç½®å·²å®Œæˆ

### æ·»åŠ çš„MCPæœåŠ¡å™¨
```json
{
  "mcpServers": {
    "streamable-mcp-server": {
      "type": "streamable-http",
      "url": "http://127.0.0.1:12306/mcp",
      "disabled": false,
      "autoApprove": []
    }
  }
}
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨streamable-mcp-server
ç¡®ä¿streamable-mcp-serveråœ¨ç«¯å£12306ä¸Šè¿è¡Œï¼š
```bash
# å¯åŠ¨streamable-mcp-server (å…·ä½“å‘½ä»¤å¯èƒ½å› å®‰è£…æ–¹å¼è€Œå¼‚)
streamable-mcp-server --port 12306
```

### 2. å¯åŠ¨Sagaå¼€å‘ç¯å¢ƒ
```bash
./scripts/dev-start-native.sh
```

### 3. è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•å‡†å¤‡è„šæœ¬
```bash
./scripts/automated-browser-test.sh
```

## ğŸ§ª è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•å¥—ä»¶æ¦‚è§ˆ
- âœ… **é¦–é¡µåŠ è½½æµ‹è¯•** - éªŒè¯é¦–é¡µæ­£å¸¸åŠ è½½
- âœ… **ç™»å½•æµç¨‹æµ‹è¯•** - è‡ªåŠ¨åŒ–ç™»å½•æµç¨‹
- âœ… **ä»ªè¡¨æ¿è®¿é—®æµ‹è¯•** - éªŒè¯è®¤è¯åé¡µé¢è®¿é—®
- âœ… **é¡¹ç›®ç®¡ç†æµ‹è¯•** - æµ‹è¯•é¡¹ç›®ç›¸å…³åŠŸèƒ½
- âœ… **èµ„æºç®¡ç†æµ‹è¯•** - æµ‹è¯•èµ„æºé’±åŒ…åŠŸèƒ½
- âœ… **è´­ä¹°æµç¨‹æµ‹è¯•** - æµ‹è¯•è´­ä¹°é¡µé¢åŠŸèƒ½

### è¯¦ç»†æµ‹è¯•ç”¨ä¾‹

#### 1. é¦–é¡µåŠ è½½æµ‹è¯•
```javascript
// ä½¿ç”¨streamable-mcp-serverå·¥å…·æ‰§è¡Œ
{
  "name": "é¦–é¡µåŠ è½½æµ‹è¯•",
  "url": "http://localhost:3000/",
  "expectedTitle": "Saga - Family Biography Platform",
  "expectedElements": ["h1", "nav", ".hero-section"]
}
```

#### 2. ç™»å½•æµç¨‹æµ‹è¯•
```javascript
{
  "name": "ç™»å½•é¡µé¢æµ‹è¯•",
  "url": "http://localhost:3000/auth/signin",
  "actions": [
    {
      "type": "fill",
      "selector": "input[type='email']",
      "value": "demo@saga.com"
    },
    {
      "type": "fill", 
      "selector": "input[type='password']",
      "value": "password"
    },
    {
      "type": "click",
      "selector": "button[type='submit']"
    }
  ]
}
```

#### 3. ä»ªè¡¨æ¿åŠŸèƒ½æµ‹è¯•
```javascript
{
  "name": "ä»ªè¡¨æ¿è®¿é—®æµ‹è¯•",
  "url": "http://localhost:3000/dashboard",
  "requiresAuth": true,
  "expectedElements": [".sidebar", ".main-content", "h1"]
}
```

## ğŸ”§ åœ¨Kiroä¸­ä½¿ç”¨MCPå·¥å…·

### åŸºæœ¬æµè§ˆå™¨æ“ä½œ
ä½¿ç”¨streamable-mcp-serverå·¥å…·å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. **æ‰“å¼€é¡µé¢**
   ```
   è¯·ä½¿ç”¨streamable-mcp-serveræ‰“å¼€ http://localhost:3000
   ```

2. **å¡«å†™è¡¨å•**
   ```
   è¯·åœ¨ç™»å½•é¡µé¢å¡«å†™é‚®ç®± demo@saga.com å’Œå¯†ç  password
   ```

3. **ç‚¹å‡»æŒ‰é’®**
   ```
   è¯·ç‚¹å‡»ç™»å½•æŒ‰é’®æäº¤è¡¨å•
   ```

4. **éªŒè¯é¡µé¢å…ƒç´ **
   ```
   è¯·æ£€æŸ¥é¡µé¢æ˜¯å¦åŒ…å«ä»ªè¡¨æ¿çš„ä¸»è¦å…ƒç´ 
   ```

5. **æˆªå›¾éªŒè¯**
   ```
   è¯·æˆªå›¾å½“å‰é¡µé¢ä»¥éªŒè¯æ˜¾ç¤ºæ•ˆæœ
   ```

### å®Œæ•´æµ‹è¯•æµç¨‹ç¤ºä¾‹
```
1. æ‰“å¼€é¦–é¡µ http://localhost:3000
2. éªŒè¯é¡µé¢æ ‡é¢˜å’Œä¸»è¦å…ƒç´ 
3. å¯¼èˆªåˆ°ç™»å½•é¡µé¢ /auth/signin
4. å¡«å†™ç™»å½•è¡¨å• (demo@saga.com / password)
5. æäº¤ç™»å½•è¡¨å•
6. éªŒè¯è·³è½¬åˆ°ä»ªè¡¨æ¿
7. æµ‹è¯•å„ä¸ªåŠŸèƒ½é¡µé¢çš„è®¿é—®
8. æˆªå›¾è®°å½•æµ‹è¯•ç»“æœ
```

## ğŸ“‹ æµ‹è¯•æ£€æŸ¥æ¸…å•

### é¡µé¢åŠ è½½æµ‹è¯•
- [ ] é¦–é¡µæ­£å¸¸åŠ è½½
- [ ] ç™»å½•é¡µé¢æ­£å¸¸åŠ è½½
- [ ] æ³¨å†Œé¡µé¢æ­£å¸¸åŠ è½½
- [ ] ä»ªè¡¨æ¿é¡µé¢æ­£å¸¸åŠ è½½
- [ ] é¡¹ç›®é¡µé¢æ­£å¸¸åŠ è½½
- [ ] èµ„æºç®¡ç†é¡µé¢æ­£å¸¸åŠ è½½
- [ ] è´­ä¹°é¡µé¢æ­£å¸¸åŠ è½½

### åŠŸèƒ½æµ‹è¯•
- [ ] ç”¨æˆ·ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½æ­£å¸¸
- [ ] é¡µé¢å¯¼èˆªåŠŸèƒ½æ­£å¸¸
- [ ] è¡¨å•æäº¤åŠŸèƒ½æ­£å¸¸
- [ ] æ•°æ®æ˜¾ç¤ºåŠŸèƒ½æ­£å¸¸

### å“åº”å¼æµ‹è¯•
- [ ] æ¡Œé¢ç«¯æ˜¾ç¤ºæ­£å¸¸
- [ ] å¹³æ¿ç«¯æ˜¾ç¤ºæ­£å¸¸
- [ ] ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸

### æ€§èƒ½æµ‹è¯•
- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 3ç§’
- [ ] äº¤äº’å“åº”æ—¶é—´ < 1ç§’
- [ ] æ— JavaScripté”™è¯¯
- [ ] æ— æ§åˆ¶å°è­¦å‘Š

## ğŸ¯ æµ‹è¯•ç›®æ ‡

### ä¸»è¦ç›®æ ‡
1. **éªŒè¯æ‰€æœ‰é¡µé¢æ­£å¸¸åŠ è½½** - ç¡®ä¿æ²¡æœ‰404é”™è¯¯
2. **éªŒè¯ç”¨æˆ·æµç¨‹å®Œæ•´** - ä»æ³¨å†Œåˆ°ä½¿ç”¨çš„å®Œæ•´ä½“éªŒ
3. **éªŒè¯UIç»„ä»¶æ­£å¸¸** - æŒ‰é’®ã€è¡¨å•ã€å¯¼èˆªç­‰
4. **éªŒè¯æ•°æ®äº¤äº’** - å‰åç«¯APIè°ƒç”¨æ­£å¸¸

### æˆåŠŸæ ‡å‡†
- âœ… æ‰€æœ‰é¡µé¢è¿”å›200çŠ¶æ€ç 
- âœ… ç™»å½•/æ³¨å†Œæµç¨‹æ— é”™è¯¯
- âœ… é¡µé¢å…ƒç´ æ­£ç¡®æ˜¾ç¤º
- âœ… ç”¨æˆ·äº¤äº’å“åº”æ­£å¸¸
- âœ… æ— JavaScriptæ§åˆ¶å°é”™è¯¯

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **streamable-mcp-serverè¿æ¥å¤±è´¥**
   - æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦åœ¨ç«¯å£12306è¿è¡Œ
   - éªŒè¯URLé…ç½®æ˜¯å¦æ­£ç¡®

2. **é¡µé¢åŠ è½½å¤±è´¥**
   - ç¡®è®¤å¼€å‘æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥å‰åç«¯æœåŠ¡å™¨çŠ¶æ€

3. **ç™»å½•å¤±è´¥**
   - ä½¿ç”¨æ­£ç¡®çš„æ¼”ç¤ºè´¦æˆ·å‡­æ®
   - æ£€æŸ¥åç«¯è®¤è¯APIçŠ¶æ€

### è°ƒè¯•æ­¥éª¤
1. è¿è¡Œ `./scripts/automated-browser-test.sh` æ£€æŸ¥ç¯å¢ƒ
2. éªŒè¯æ‰€æœ‰æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ
3. åœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨æµ‹è¯•åŠŸèƒ½
4. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåï¼Œè¯·è®°å½•ï¼š
- æµ‹è¯•æ‰§è¡Œæ—¶é—´
- é€šè¿‡/å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹
- å‘ç°çš„é—®é¢˜å’Œé”™è¯¯
- æ€§èƒ½æŒ‡æ ‡
- æˆªå›¾è¯æ®

## ğŸ‰ å¼€å§‹æµ‹è¯•

ç°åœ¨ä½ å¯ä»¥ï¼š
1. åœ¨Kiroä¸­ä½¿ç”¨streamable-mcp-serverå·¥å…·
2. æ‰§è¡Œè‡ªåŠ¨åŒ–æµè§ˆå™¨æµ‹è¯•
3. éªŒè¯Sagaåº”ç”¨çš„æ‰€æœ‰åŠŸèƒ½
4. ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

MCPé…ç½®å·²å®Œæˆï¼Œå¼€å§‹ä½ çš„è‡ªåŠ¨åŒ–æµ‹è¯•ä¹‹æ—…å§ï¼ğŸš€