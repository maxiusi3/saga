# Saga è®¤è¯åŠŸèƒ½æµ‹è¯•æŒ‡å—

## ğŸ‰ é—®é¢˜å·²è§£å†³

### ä¿®å¤å†…å®¹
1. **æ·»åŠ ç¼ºå¤±çš„APIç«¯ç‚¹** - `/api/auth/profile`
2. **ç»Ÿä¸€å“åº”æ ¼å¼** - æ‰€æœ‰APIè¿”å›ä¸€è‡´çš„æ•°æ®ç»“æ„
3. **å®Œå–„é”™è¯¯å¤„ç†** - æ­£ç¡®çš„HTTPçŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯
4. **æ”¯æŒOAuthç™»å½•** - Googleå’ŒAppleç™»å½•ç«¯ç‚¹

## ğŸ” å¯ç”¨çš„è®¤è¯åŠŸèƒ½

### ä¼ ç»Ÿç™»å½•/æ³¨å†Œ
- âœ… **ç”¨æˆ·ç™»å½•**: `POST /api/auth/signin`
- âœ… **ç”¨æˆ·æ³¨å†Œ**: `POST /api/auth/signup`
- âœ… **ç”¨æˆ·ç™»å‡º**: `POST /api/auth/signout`
- âœ… **è·å–ç”¨æˆ·èµ„æ–™**: `GET /api/auth/profile`
- âœ… **åˆ·æ–°ä»¤ç‰Œ**: `POST /api/auth/refresh`

### OAuthç™»å½•
- âœ… **Googleç™»å½•**: `POST /api/auth/oauth/google`
- âœ… **Appleç™»å½•**: `POST /api/auth/oauth/apple`

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### 1. è‡ªåŠ¨åŒ–æµ‹è¯•
```bash
# è¿è¡Œè®¤è¯åŠŸèƒ½æµ‹è¯•
./scripts/test-auth.sh
```

### 2. æ‰‹åŠ¨æµ‹è¯•

#### è®¿é—®ç™»å½•é¡µé¢
```
http://localhost:3000/auth/signin
```

#### ä½¿ç”¨æ¼”ç¤ºè´¦æˆ·
- **é‚®ç®±**: demo@saga.com
- **å¯†ç **: password

æˆ–è€…ç‚¹å‡»é¡µé¢ä¸Šçš„"Quick Login with Demo Account"æŒ‰é’®

#### æµ‹è¯•æ³¨å†ŒåŠŸèƒ½
```
http://localhost:3000/auth/signup
```

### 3. APIæµ‹è¯•

#### ç™»å½•æµ‹è¯•
```bash
curl -X POST http://localhost:4000/api/auth/signin \
  -H "Content-Type: application/json" \
  -d '{"email":"demo@saga.com","password":"password"}'
```

#### æ³¨å†Œæµ‹è¯•
```bash
curl -X POST http://localhost:4000/api/auth/signup \
  -H "Content-Type: application/json" \
  -d '{"name":"Test User","email":"test@example.com","password":"password123"}'
```

#### è·å–ç”¨æˆ·èµ„æ–™
```bash
curl http://localhost:4000/api/auth/profile
```

## ğŸ“‹ APIå“åº”æ ¼å¼

### æˆåŠŸå“åº”
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "demo-user-1",
      "email": "demo@saga.com",
      "name": "Demo User",
      "resourceWallet": {
        "projectVouchers": 1,
        "facilitatorSeats": 2,
        "storytellerSeats": 2
      }
    },
    "accessToken": "demo-jwt-token",
    "refreshToken": "demo-refresh-token"
  }
}
```

### é”™è¯¯å“åº”
```json
{
  "success": false,
  "error": {
    "message": "Email and password are required"
  }
}
```

## ğŸ¯ æµ‹è¯•åœºæ™¯

### æ­£å¸¸æµç¨‹
1. âœ… ç”¨æˆ·è®¿é—®ç™»å½•é¡µé¢
2. âœ… è¾“å…¥æœ‰æ•ˆå‡­æ®ç™»å½•
3. âœ… æˆåŠŸè·³è½¬åˆ°ä»ªè¡¨æ¿
4. âœ… è·å–ç”¨æˆ·èµ„æ–™ä¿¡æ¯
5. âœ… ç”¨æˆ·ç™»å‡º

### æ³¨å†Œæµç¨‹
1. âœ… ç”¨æˆ·è®¿é—®æ³¨å†Œé¡µé¢
2. âœ… å¡«å†™æ³¨å†Œä¿¡æ¯
3. âœ… æˆåŠŸåˆ›å»ºè´¦æˆ·
4. âœ… è‡ªåŠ¨ç™»å½•å¹¶è·³è½¬

### é”™è¯¯å¤„ç†
1. âœ… ç¼ºå°‘å¿…å¡«å­—æ®µæ—¶æ˜¾ç¤ºé”™è¯¯
2. âœ… æ— æ•ˆå‡­æ®æ—¶æ˜¾ç¤ºé”™è¯¯
3. âœ… ç½‘ç»œé”™è¯¯æ—¶æ˜¾ç¤ºé”™è¯¯

### OAuthç™»å½•
1. âœ… Googleç™»å½•æŒ‰é’®å¯ç‚¹å‡»
2. âœ… Appleç™»å½•æŒ‰é’®å¯ç‚¹å‡»
3. âœ… OAuthæµç¨‹æ­£ç¡®å¤„ç†

## ğŸ”§ å¼€å‘è€…ä¿¡æ¯

### æ¼”ç¤ºè´¦æˆ·
```
é‚®ç®±: demo@saga.com
å¯†ç : password

é‚®ç®±: another@example.com  
å¯†ç : TestPassword123
```

### æ¨¡æ‹Ÿæ•°æ®
- æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰ç›¸åŒçš„èµ„æºé’±åŒ…é…ç½®
- JWTä»¤ç‰Œä¸ºæ¨¡æ‹Ÿå€¼ï¼Œä¸è¿›è¡Œå®é™…éªŒè¯
- OAuthç™»å½•è¿”å›æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®

### å‰ç«¯é›†æˆ
- è®¤è¯çŠ¶æ€é€šè¿‡Zustand storeç®¡ç†
- ä»¤ç‰Œå­˜å‚¨åœ¨localStorageä¸­
- è‡ªåŠ¨å¤„ç†ä»¤ç‰Œåˆ·æ–°å’Œé”™è¯¯

## ğŸ‰ æµ‹è¯•ç»“æœ

```
ğŸ” æµ‹è¯•Sagaè®¤è¯åŠŸèƒ½
==================
âœ… è·å–ç”¨æˆ·èµ„æ–™: 200
âœ… ç”¨æˆ·ç™»å½•: 200  
âœ… ç”¨æˆ·æ³¨å†Œ: 200
âœ… ç”¨æˆ·ç™»å‡º: 200
âœ… åˆ·æ–°ä»¤ç‰Œ: 200
âœ… Google OAuthç™»å½•: 200
âœ… Apple OAuthç™»å½•: 200
âœ… æ­£ç¡®å¤„ç†ç¼ºå°‘å‚æ•°: 400
âœ… é”™è¯¯å¤„ç†æ­£ç¡®å®ç°

ğŸ‰ è®¤è¯åŠŸèƒ½æµ‹è¯•å®Œæˆï¼
```

## ğŸš€ ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å¯ä»¥ï¼š
1. **æ­£å¸¸ä½¿ç”¨ç™»å½•/æ³¨å†ŒåŠŸèƒ½** - æ‰€æœ‰è®¤è¯æµç¨‹éƒ½å·²ä¿®å¤
2. **æµ‹è¯•å®Œæ•´ç”¨æˆ·æµç¨‹** - ä»æ³¨å†Œåˆ°ä½¿ç”¨åº”ç”¨çš„å®Œæ•´ä½“éªŒ
3. **å¼€å‘å…¶ä»–åŠŸèƒ½** - è®¤è¯åŸºç¡€å·²ç¨³å®šï¼Œå¯ä»¥ä¸“æ³¨å…¶ä»–åŠŸèƒ½å¼€å‘
4. **é›†æˆçœŸå®è®¤è¯æœåŠ¡** - å½“éœ€è¦æ—¶å¯ä»¥æ›¿æ¢ä¸ºçœŸå®çš„è®¤è¯åç«¯

è®¤è¯åŠŸèƒ½ç°åœ¨å®Œå…¨æ­£å¸¸å·¥ä½œï¼ğŸ‰