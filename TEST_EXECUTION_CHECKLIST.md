# 测试执行检查清单 - Saga家族传记系统

## 🎯 测试前准备

### 环境检查
- [ ] Node.js 18+ 已安装
- [ ] npm 8+ 已安装
- [ ] 项目依赖已安装 (`npm install`)
- [ ] 数据库已设置并运行
- [ ] 环境变量已配置 (`.env` 文件)

### 测试工具准备
- [ ] 运行 `./scripts/setup-test-environment.sh`
- [ ] 运行 `./scripts/create-test-data.sh`
- [ ] 验证测试数据已生成
- [ ] 运行数据库种子 (`npm run seed:run`)

### 服务器启动
- [ ] 后端服务器启动 (`cd packages/backend && npm run dev`)
- [ ] Web前端启动 (`cd packages/web && npm run dev`)
- [ ] 移动应用启动 (`cd packages/mobile && npm run start`) - 可选
- [ ] 所有服务正常运行

## 🔧 自动化测试执行

### 全面测试套件
- [ ] 运行 `./scripts/comprehensive-test-suite.sh`
- [ ] 检查测试结果报告
- [ ] 确认所有测试通过
- [ ] 记录任何失败的测试

### 单独组件测试
- [ ] 资源钱包系统: `./scripts/quick-test.sh wallet`
- [ ] 身份验证系统: `./scripts/quick-test.sh auth`
- [ ] AI提示系统: `./scripts/quick-test.sh prompts`
- [ ] 录音STT管道: `./scripts/quick-test.sh recording`
- [ ] 故事管理系统: `./scripts/quick-test.sh stories`
- [ ] 数据导出系统: `./scripts/quick-test.sh export`
- [ ] Web仪表板: `./scripts/quick-test.sh web`
- [ ] 移动应用: `./scripts/quick-test.sh mobile`

### 性能测试
- [ ] 运行 `./scripts/performance-test.sh`
- [ ] 检查响应时间指标
- [ ] 验证内存使用情况
- [ ] 确认负载测试结果

### API端点测试
- [ ] 运行 `./scripts/test-api-endpoints.sh`
- [ ] 验证所有API端点响应正常
- [ ] 检查认证和授权
- [ ] 确认错误处理正确

## 👤 人工测试执行

### 任务1: 资源钱包系统
- [ ] **1.1 用户注册和初始钱包验证**
  - [ ] 注册新用户账户
  - [ ] 验证初始资源分配
  - [ ] 检查钱包状态显示
- [ ] **1.2 项目创建消耗项目券**
  - [ ] 创建新项目
  - [ ] 验证项目券消耗
  - [ ] 检查交易记录
- [ ] **1.3 邀请用户消耗座位**
  - [ ] 发送邀请
  - [ ] 接受邀请
  - [ ] 验证座位消耗时机
- [ ] **1.4 资源不足处理**
  - [ ] 测试资源不足场景
  - [ ] 验证错误提示
  - [ ] 检查购买提示

### 任务2: 身份验证和用户管理
- [ ] **2.1 OAuth注册流程**
  - [ ] 测试Google OAuth (如果配置)
  - [ ] 测试Apple OAuth (如果配置)
  - [ ] 验证用户创建
- [ ] **2.2 JWT令牌管理**
  - [ ] 检查令牌生成
  - [ ] 测试令牌刷新
  - [ ] 验证令牌过期处理
- [ ] **2.3 受保护路由访问**
  - [ ] 测试未登录访问
  - [ ] 验证登录后访问
  - [ ] 检查角色权限

### 任务3: AI提示系统
- [ ] **3.1 章节基础进展**
  - [ ] 查看第一个提示
  - [ ] 录制回答
  - [ ] 验证提示顺序
- [ ] **3.2 用户跟进问题优先级**
  - [ ] 添加跟进问题
  - [ ] 验证优先级显示
  - [ ] 检查队列管理
- [ ] **3.3 文字转语音集成**
  - [ ] 播放TTS音频
  - [ ] 检查音频质量
  - [ ] 验证缓存机制
- [ ] **3.4 章节完成和摘要生成**
  - [ ] 完成章节所有提示
  - [ ] 检查摘要生成
  - [ ] 验证摘要质量

### 任务4: 录音和STT管道
- [ ] **4.1 移动应用录音功能**
  - [ ] 测试录音按钮
  - [ ] 检查波形可视化
  - [ ] 验证录音质量指示器
- [ ] **4.2 审查和发送工作流程**
  - [ ] 进入审查界面
  - [ ] 测试音频播放
  - [ ] 验证发送功能
- [ ] **4.3 语音转文字处理**
  - [ ] 等待STT处理
  - [ ] 检查转录准确性
  - [ ] 测试编辑功能
- [ ] **4.4 文件处理管道**
  - [ ] 测试不同音频格式
  - [ ] 验证文件大小限制
  - [ ] 检查压缩优化

### 任务5: 故事管理系统
- [ ] **5.1 故事CRUD操作**
  - [ ] 创建新故事
  - [ ] 查看故事详情
  - [ ] 编辑故事元数据
  - [ ] 测试软删除
- [ ] **5.2 故事交互功能**
  - [ ] 添加评论
  - [ ] 创建跟进问题
  - [ ] 测试实时更新
- [ ] **5.3 故事发现和搜索**
  - [ ] 关键词搜索
  - [ ] 日期筛选
  - [ ] 章节筛选
  - [ ] 全文搜索
- [ ] **5.4 故事统计和分析**
  - [ ] 查看统计数据
  - [ ] 检查完成度跟踪
  - [ ] 验证推荐功能

### 任务6: 数据导出系统
- [ ] **6.1 PDF导出功能**
  - [ ] 请求PDF导出
  - [ ] 等待导出完成
  - [ ] 检查PDF质量
- [ ] **6.2 JSON导出功能**
  - [ ] 请求JSON导出
  - [ ] 验证数据完整性
  - [ ] 测试重新导入
- [ ] **6.3 归档模式功能**
  - [ ] 模拟订阅过期
  - [ ] 验证只读访问
  - [ ] 测试导出可用性
- [ ] **6.4 导出分析和通知**
  - [ ] 跟踪导出状态
  - [ ] 验证完成通知
  - [ ] 检查分析数据

### 任务7: Web仪表板
- [ ] **7.1 项目管理界面**
  - [ ] 访问项目列表
  - [ ] 创建新项目
  - [ ] 编辑项目详情
  - [ ] 管理项目成员
- [ ] **7.2 故事信息流界面**
  - [ ] 查看故事时间线
  - [ ] 播放音频故事
  - [ ] 添加交互
  - [ ] 测试搜索筛选
- [ ] **7.3 仪表板导航**
  - [ ] 测试侧边栏导航
  - [ ] 检查响应式设计
  - [ ] 验证无障碍功能
- [ ] **7.4 订阅管理界面**
  - [ ] 查看订阅状态
  - [ ] 管理付款方式
  - [ ] 测试续费流程

### 任务8: 移动应用基础
- [ ] **8.1 入门流程**
  - [ ] 完成欢迎界面
  - [ ] 填写用户信息
  - [ ] 接受隐私条款
  - [ ] 完成教程
- [ ] **8.2 录音界面**
  - [ ] 查看提示卡片
  - [ ] 使用录音控件
  - [ ] 检查质量指示器
- [ ] **8.3 无障碍功能**
  - [ ] 测试屏幕阅读器
  - [ ] 验证高对比度模式
  - [ ] 检查触摸目标大小
- [ ] **8.4 故事查看界面**
  - [ ] 查看故事列表
  - [ ] 播放音频
  - [ ] 测试离线功能

## 🔄 跨平台集成测试

### 数据同步测试
- [ ] Web创建项目 → 移动端验证
- [ ] 移动端录制故事 → Web端验证
- [ ] Web添加交互 → 移动端通知
- [ ] 验证实时同步

### 端到端用户旅程
- [ ] **协调员旅程 (Web)**
  - [ ] 注册并创建项目
  - [ ] 邀请讲述者
  - [ ] 监控故事提交
  - [ ] 添加跟进问题
  - [ ] 导出项目数据
- [ ] **讲述者旅程 (移动)**
  - [ ] 接受邀请
  - [ ] 完成入门流程
  - [ ] 录制第一个故事
  - [ ] 回应跟进问题
  - [ ] 查看家人交互

## 📊 性能和负载测试

### 性能指标验证
- [ ] 应用冷启动时间 < 3秒
- [ ] 故事信息流加载 < 2秒
- [ ] API响应时间 < 500ms (95%)
- [ ] 端到端延迟 < 30秒

### 负载测试
- [ ] 100并发用户测试
- [ ] 数据库性能监控
- [ ] 内存使用检查
- [ ] 错误率验证 < 1%

## 🔒 安全测试

### 手动安全测试
- [ ] SQL注入攻击测试
- [ ] XSS防护验证
- [ ] CSRF保护检查
- [ ] 速率限制测试
- [ ] 文件上传安全
- [ ] 身份验证绕过尝试

### 安全配置检查
- [ ] HTTPS强制执行
- [ ] 安全头部设置
- [ ] 敏感数据加密
- [ ] 访问控制验证

## 📱 设备兼容性测试

### iOS设备测试
- [ ] iPhone 12+ 测试
- [ ] iPad 测试
- [ ] 不同屏幕尺寸
- [ ] 横竖屏切换

### Android设备测试
- [ ] Pixel系列测试
- [ ] Samsung Galaxy测试
- [ ] 不同Android版本
- [ ] 各种屏幕密度

### Web浏览器测试
- [ ] Chrome最新版本
- [ ] Safari最新版本
- [ ] Firefox最新版本
- [ ] 移动浏览器

## 🐛 问题跟踪

### 发现的问题记录
- [ ] 高优先级问题: ___/___
- [ ] 中优先级问题: ___/___
- [ ] 低优先级问题: ___/___
- [ ] 总问题数: ___

### 问题分类统计
- [ ] 功能性问题: ___
- [ ] 性能问题: ___
- [ ] 用户体验问题: ___
- [ ] 安全问题: ___
- [ ] 兼容性问题: ___

## ✅ 测试完成标准

### 必须满足的条件
- [ ] 所有自动化测试通过 (>95%)
- [ ] 所有手动测试场景完成
- [ ] 性能指标达到要求
- [ ] 无关键安全漏洞
- [ ] 跨平台功能正常
- [ ] 无障碍性符合标准

### 质量指标
- [ ] 代码覆盖率 > 80%
- [ ] 功能覆盖率 > 90%
- [ ] 用户体验评分 > 4.0/5.0
- [ ] 系统稳定性 > 99%

## 📋 测试报告

### 报告生成
- [ ] 使用测试报告模板
- [ ] 填写所有测试结果
- [ ] 包含问题详细描述
- [ ] 添加改进建议
- [ ] 生成最终报告

### 报告审查
- [ ] 技术团队审查
- [ ] 产品团队审查
- [ ] 质量保证审查
- [ ] 最终批准

## 🎉 测试完成后续步骤

### 生产部署准备
- [ ] 修复所有关键问题
- [ ] 更新部署文档
- [ ] 准备生产环境
- [ ] 制定回滚计划

### 用户验收测试
- [ ] 招募beta测试用户
- [ ] 设置用户反馈渠道
- [ ] 监控用户行为
- [ ] 收集改进建议

### 监控和维护
- [ ] 设置生产监控
- [ ] 配置告警系统
- [ ] 建立支持流程
- [ ] 计划定期测试

---

**测试执行人员**: ________________
**测试开始日期**: ________________
**测试完成日期**: ________________
**测试环境版本**: ________________

**最终签名**: ________________ **日期**: ________________